<!DOCTYPE html>
<html lang="pt-br">
<body>

    <div class="container-principal">
        
        <h1 style="text-align: center; font-weight: 300; color: var(--cor-texto-secundario);">
            File Stream Bot
        </h1>

        <div class="plyr-container">
            <video id="player" playsinline controls>
                <source src="{{ .StreamURL }}" />
                </video>
        </div>

        <div class="info-card">
            <h2>{{ .FileName }}</h2>

            <script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>
    <script>
        // Inicializa o player Plyr
        const player = new Plyr('#player', {
            // Opções do Plyr aqui (se necessário)
        });

        // Script para o botão "Copiar Link"
        const copyButton = document.getElementById('copy-link-btn');
        copyButton.addEventListener('click', () => {
            // Usamos o link de download, pois é o link direto
            const linkToCopy = "{{ .DownloadURL }}";
            
            // Se o link for relativo (ex: /stream/...), transforma em absoluto
            const absoluteLink = new URL(linkToCopy, window.location.origin).href;

            navigator.clipboard.writeText(absoluteLink).then(() => {
                copyButton.innerHTML = '<span class="material-symbols-outlined">done</span> Copiado!';
                setTimeout(() => {
                    copyButton.innerHTML = '<span class="material-symbols-outlined">link</span> Copiar Link';
                }, 2000);
            }).catch(err => {
                console.error('Falha ao copiar link: ', err);
                copyButton.innerText = 'Erro ao copiar';
            });
        });
    </script>
</body>
</html>
